
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Joseph Wilk</title>
  <meta name="author" content="Joseph Wilk">

  
  <meta name="description" content="FutureRuby was an exceptional conference and I was excited to be a part of such a creative group of people. I talked about Cucumber, looking at what &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://josephwilk.github.io/page/5/index.html">
  <link href="/blog/favicon.png" rel="icon">
  <link href="/blog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Joseph Wilk" type="application/atom+xml">
  <script src="/blog/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/blog/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<script src="http://disqus.com/forums/josephwilk/embed.js"></script>
<link href="http://fonts.googleapis.com/css?family=Bevan" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3020740-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <img src="/blog/images/joe_small.jpg" style="position:relative;border-radius: 8px;margin-right: 5px;border-style: solid;border-width: 1px;border-color: #DDD;" height="60" alt="Joseph Wilk">
  <span style="display:inline-block">
    <h1><a href="/blog/">Joseph Wilk</a></h1>
    <h2>Programming bits and bobs</h2>
  </span>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:josephwilk.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
 <li><a href="/blog/">Home</a></li>
 <li><a href="/blog/about">About</a></li>
 <li><a href="/blog/speaking">Speaking</a></li>
 <li><a href="/blog/contact">Contact</a></li>
 <li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/ruby/futureruby-talk-cucumbered.html">FutureRuby Talk: Cucumbered</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-17T22:29:52+02:00" pubdate data-updated="true">Jul 17<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://futureruby.com/">FutureRuby</a> was an exceptional conference and I was excited to be a part of such a creative group of people. I talked about Cucumber, looking at what it is, how to use it, and why to use it. Useful links for Cucumber:</p>

<ul>
<li><p>Wiki <a href="http://wiki.github.com/aslakhellesoy/cucumber">http://wiki.github.com/aslakhellesoy/cucumber</a></p></li>
<li><p>Source code <a href="http://github.com/aslakhellesoy/cucumber">http://github.com/aslakhellesoy/cucumber</a>.</p></li>
</ul>


<p> I demonstrated using Cucumber to test a simple IPhone application. To make the IPhone testing a little more palatable I used a little gem called IRobat. Its very rough around the edges and in no way complete but you can take a look at the <a href="http://github.com/josephwilk/irobat/">IRobat code on Github</a>.</p>

<p>No Cucumbers were harmed (just mildly shaken up) in the making of this presentation.</p>

<p><a href="http://www.slideshare.net/josephwilk/cucumbered">Cucumbered</a></p>

<p>View more <a href="http://www.slideshare.net/">documents</a> from <a href="http://www.slideshare.net/josephwilk">Joseph Wilk</a>.</p>

<p>What people were saying about the talk:</p>

<p><img src="/blog/images/blog/2009/07/Picture-12.png" alt="FutureRuby Cucumber Twitter Talk" /></p>

<p><img src="/blog/images/blog/2009/07/Picture-13.png" alt="FutureRuby Cucumber twitter talk" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/ruby/mind-the-gap-european-software-tester-magazine-article.html">Mind the Gap - European Software Tester Magazine Article</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-06-04T21:29:08+02:00" pubdate data-updated="true">Jun 4<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I recently wrote an article for &lsquo;The European Software Tester&rsquo; magazine which looked at ways Cucumber, Acceptance tests in general and practices around Behaviour Driven Development can help avoid the gap between what the customer wants and what they get. I&rsquo;m happy to say the article has been published and is also available digitally:</p>

<p><a href="http://content.yudu.com/Library/A15ltd/TestMarch2009/resources/index.htm?referrerUrl=http%3A%2F%2Fwww.yudu.com%2Fitem%2Fdetails%2F43094%2FTest-March-2009">European Software Tester &ndash; 09 March Issue</a> - Page 28</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/ruby/cucumber-tags-and-continuous-integration-oh-my.html">Cucumber, Tags and Continuous Integration Oh My!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-04-12T14:56:08+02:00" pubdate data-updated="true">Apr 12<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>We want to be able to commit our code frequently to prevent merge headaches.</p>

<p>&ldquo;<em>the longer you wait, the more your code will diverge from your teammates. If you don&rsquo;t commit often you rob them of the opportunity to reduce merge hell.</em>&rdquo; Aslak Hellesøy</p>

<p>When dealing with Cucumber and Features/Scenarios we may find we want to commit part way through a scenario but we won&rsquo;t because:</p>

<ol>
<li> We don&rsquo;t want to break the build</li>
<li> We don&rsquo;t want to pollute the build with lots of pending steps.</li>
</ol>


<p>A common solution to this problem is to create two streams for running the features:</p>

<ol>
<li><p> In-progress</p>

<ul>
<li>If an in-progress scenario fails then the build carries on.</li>
<li>If an in-progress scenario passes then the build fails (This is very similar to how Rspec works with pending)</li>
</ul>
</li>
<li><p>   Finished</p>

<ul>
<li>If a completed scenario fails it causes the build to fail.</li>
</ul>
</li>
</ol>


<p>We can implement this model using Cucumber&rsquo;s new Tag feature. We can tag Scenarios and Features with @in-progress and use this tag to help exclude in-progress Features/Scenarios from the finished build.</p>

<pre><code>@in-progress
Feature:
  In order to avoid merge headaches
  As a developer
  I want to tag my features and scenarios with a in-progress tag

  @in-progress
  Scenario: I'm not finished yet
    Given ...
    When ...
    Then ...
</code></pre>

<h2>The Rake tasks</h2>

<h3>Finished features/scenarios task</h3>

<p>We prefix tags with ~ to exclude features or scenarios having that tag</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="n">desc</span> <span class="s2">&quot;Run finished features&quot;</span>
</span><span class='line'>  <span class="ss">Cucumber</span><span class="p">:</span><span class="ss">:Rake</span><span class="o">::</span><span class="no">Task</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:finished</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
</span><span class='line'>    <span class="n">t</span><span class="o">.</span><span class="n">cucumber_opts</span> <span class="o">=</span> <span class="s2">&quot;--format progress --tags ~in-progress&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>In-progress features/scenarios task</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="n">desc</span> <span class="s2">&quot;Run in-progress features&quot;</span>
</span><span class='line'>  <span class="ss">Cucumber</span><span class="p">:</span><span class="ss">:Rake</span><span class="o">::</span><span class="no">Task</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:in_progress</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
</span><span class='line'>    <span class="n">t</span><span class="o">.</span><span class="n">cucumber_opts</span> <span class="o">=</span> <span class="s2">&quot;--require formatters/ --format Cucumber::Formatter::InProgress --tags in-progress&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>We require a special formatter Cucumber::Formatter::InProgress which is essential for making the task work. This formatter as well as giving helpful output changes the command line exit codes of Cucumber. This is kind of crazy but only within the formatter do we have enough information to decided if we should fail or pass. The formatter only returns a failure exit code if there were any scenarios which passed. So unlike the default exit codes failing steps will not cause a failure exit code.</p>

<h2>Full Source Code</h2>

<p>Also available at: <a href="http://github.com/josephwilk/cucumber_cocktails/tree/master">http://github.com/josephwilk/cucumber_cocktails/tree/master</a></p>

<h3>Rake Task</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;cucumber/rake/task&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">BuildFailure</span> <span class="o">&lt;</span> <span class="no">Exception</span><span class="p">;</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">message</span> <span class="o">=</span> <span class="kp">nil</span><span class="p">)</span>
</span><span class='line'>    <span class="n">message</span> <span class="o">||=</span> <span class="s2">&quot;Build failed&quot;</span>
</span><span class='line'>    <span class="k">super</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="ss">Cucumber</span><span class="p">:</span><span class="ss">:Rake</span><span class="o">::</span><span class="no">Task</span><span class="o">.</span><span class="n">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
</span><span class='line'>  <span class="n">t</span><span class="o">.</span><span class="n">cucumber_opts</span> <span class="o">=</span> <span class="s2">&quot;--format progress&quot;</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="n">namespace</span> <span class="ss">:features</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">desc</span> <span class="s2">&quot;Run finished features&quot;</span>
</span><span class='line'>  <span class="ss">Cucumber</span><span class="p">:</span><span class="ss">:Rake</span><span class="o">::</span><span class="no">Task</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:finished</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
</span><span class='line'>    <span class="n">t</span><span class="o">.</span><span class="n">cucumber_opts</span> <span class="o">=</span> <span class="s2">&quot;--format progress --tags ~in-progress&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">desc</span> <span class="s2">&quot;Run in-progress features&quot;</span>
</span><span class='line'>  <span class="ss">Cucumber</span><span class="p">:</span><span class="ss">:Rake</span><span class="o">::</span><span class="no">Task</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:in_progress</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
</span><span class='line'>    <span class="n">t</span><span class="o">.</span><span class="n">cucumber_opts</span> <span class="o">=</span> <span class="s2">&quot;--require formatters/ --format Cucumber::Formatter::InProgress --tags in-progress&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="n">desc</span> <span class="s2">&quot;Run complete feature build&quot;</span>
</span><span class='line'><span class="n">task</span> <span class="ss">:cruise</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">finished_successful</span> <span class="o">=</span> <span class="n">run_and_check_for_exception</span><span class="p">(</span><span class="s2">&quot;finished&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">in_progress_successful</span> <span class="o">=</span> <span class="n">run_and_check_for_exception</span><span class="p">(</span><span class="s2">&quot;in_progress&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">unless</span> <span class="n">finished_successful</span> <span class="o">&amp;&amp;</span> <span class="n">in_progress_successful</span>
</span><span class='line'>    <span class="nb">puts</span>
</span><span class='line'>    <span class="nb">puts</span><span class="p">(</span><span class="s2">&quot;Finished features had failing steps&quot;</span><span class="p">)</span> <span class="k">unless</span> <span class="n">finished_successful</span>
</span><span class='line'>    <span class="nb">puts</span><span class="p">(</span><span class="s2">&quot;In-progress Scenario/s passed when they should fail or be pending&quot;</span><span class="p">)</span> <span class="k">unless</span> <span class="n">in_progress_successful</span>
</span><span class='line'>    <span class="nb">puts</span>
</span><span class='line'>    <span class="k">raise</span> <span class="no">BuildFailure</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">run_and_check_for_exception</span><span class="p">(</span><span class="n">task_name</span><span class="p">)</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;*** Running </span><span class="si">#{</span><span class="n">task_name</span><span class="si">}</span><span class="s2"> features ***&quot;</span>
</span><span class='line'>  <span class="k">begin</span>
</span><span class='line'>    <span class="ss">Rake</span><span class="p">:</span><span class="ss">:Task</span><span class="o">[</span><span class="s2">&quot;features:</span><span class="si">#{</span><span class="n">task_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">].</span><span class="n">invoke</span>
</span><span class='line'>  <span class="k">rescue</span> <span class="no">Exception</span> <span class="o">=&gt;</span> <span class="n">e</span>
</span><span class='line'>    <span class="k">return</span> <span class="kp">false</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>  <span class="kp">true</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>InProgress Formatter</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">module</span> <span class="nn">Cucumber</span>
</span><span class='line'>  <span class="k">module</span> <span class="nn">Formatter</span>
</span><span class='line'>    <span class="k">class</span> <span class="nc">InProgress</span> <span class="o">&lt;</span> <span class="no">Progress</span>
</span><span class='line'>      <span class="no">FAILURE_CODE</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>      <span class="no">SUCCESS_CODE</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'>      <span class="no">FORMATS</span><span class="o">[</span><span class="ss">:invalid_pass</span><span class="o">]</span> <span class="o">=</span> <span class="no">Proc</span><span class="o">.</span><span class="n">new</span><span class="p">{</span> <span class="o">|</span><span class="n">string</span><span class="o">|</span> <span class="o">::</span><span class="ss">Term</span><span class="p">:</span><span class="ss">:ANSIColor</span><span class="o">.</span><span class="n">blue</span><span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">step_mother</span><span class="p">,</span> <span class="n">io</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</span><span class='line'>        <span class="k">super</span><span class="p">(</span><span class="n">step_mother</span><span class="p">,</span> <span class="n">io</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</span><span class='line'>        <span class="vi">@scenario_passed</span> <span class="o">=</span> <span class="kp">true</span>
</span><span class='line'>        <span class="vi">@passing_scenarios</span> <span class="o">=</span> <span class="o">[]</span>
</span><span class='line'>        <span class="vi">@feature_element_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">def</span> <span class="nf">visit_feature_element</span><span class="p">(</span><span class="n">feature_element</span><span class="p">)</span>
</span><span class='line'>        <span class="k">super</span>
</span><span class='line'>
</span><span class='line'>        <span class="vi">@passing_scenarios</span> <span class="o">&lt;&lt;</span> <span class="n">feature_element</span> <span class="k">if</span> <span class="vi">@scenario_passed</span>
</span><span class='line'>        <span class="vi">@scenario_passed</span> <span class="o">=</span> <span class="kp">true</span>
</span><span class='line'>        <span class="vi">@feature_element_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>        <span class="vi">@io</span><span class="o">.</span><span class="n">flush</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">def</span> <span class="nf">visit_exception</span><span class="p">(</span><span class="n">exception</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>
</span><span class='line'>        <span class="vi">@scenario_passed</span> <span class="o">=</span> <span class="kp">false</span>
</span><span class='line'>        <span class="k">super</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>      <span class="kp">private</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">def</span> <span class="nf">print_summary</span>
</span><span class='line'>        <span class="k">unless</span> <span class="vi">@passing_scenarios</span><span class="o">.</span><span class="n">empty?</span>
</span><span class='line'>          <span class="vi">@io</span><span class="o">.</span><span class="n">puts</span> <span class="n">format_string</span><span class="p">(</span><span class="s2">&quot;(::) Scenarios passing which should be failing or pending (::)&quot;</span><span class="p">,</span> <span class="ss">:invalid_pass</span><span class="p">)</span>
</span><span class='line'>          <span class="vi">@io</span><span class="o">.</span><span class="n">puts</span>
</span><span class='line'>          <span class="vi">@passing_scenarios</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">element</span><span class="o">|</span>
</span><span class='line'>            <span class="vi">@io</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="n">format_string</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">backtrace_line</span><span class="p">,</span> <span class="ss">:invalid_pass</span><span class="p">))</span>
</span><span class='line'>          <span class="k">end</span>
</span><span class='line'>          <span class="vi">@io</span><span class="o">.</span><span class="n">puts</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>        <span class="n">print_counts</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">unless</span> <span class="vi">@passing_scenarios</span><span class="o">.</span><span class="n">empty?</span>
</span><span class='line'>          <span class="n">override_exit_code</span><span class="p">(</span><span class="no">FAILURE_CODE</span><span class="p">)</span>
</span><span class='line'>        <span class="k">else</span>
</span><span class='line'>          <span class="n">override_exit_code</span><span class="p">(</span><span class="no">SUCCESS_CODE</span><span class="p">)</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">def</span> <span class="nf">override_exit_code</span><span class="p">(</span><span class="n">status_code</span><span class="p">)</span>
</span><span class='line'>        <span class="nb">at_exit</span> <span class="k">do</span>
</span><span class='line'>          <span class="no">Kernel</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">status_code</span><span class="p">)</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/ruby/outside-in-development-with-cucumber-and-rspec.html">Outside-in Development With Cucumber and Rspec</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-03-30T17:59:11+02:00" pubdate data-updated="true">Mar 30<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I was speaking in Edinburgh at Scotland on Rails 2009 about Cucumber and Rspec.</p>

<p>You can watch the <a href="http://scotland-on-rails.s3.amazonaws.com/1A06_JosephWilk-SOR.mp4">recorded full talk</a>.</p>

<p>I&rsquo;ve also posted the slides from the presentation and uploaded the screencasts used in the presentation in both high and low resolutions. They are accessible from links within the presentation.</p>

<p>Here are some of the useful links from the presentation:</p>

<ul>
<li><p>Cuke&rsquo;s official website &ndash; <a href="http://cukes.info">http://cukes.info</a></p></li>
<li><p>Cucumer&rsquo;s github wiki &ndash; <a href="http://wiki.github.com/aslakhellesoy/cucumber">http://wiki.github.com/aslakhellesoy/cucumber</a></p></li>
<li><p>Rspec&rsquo;s website &ndash; <a href="http://rspec.info">http://rspec.info</a></p></li>
<li><p>The Rspec book &ndash; Pragmatic book store &ndash; <a href="http://www.pragprog.com/titles/achbd/the-rspec-book">http://www.pragprog.com/titles/achbd/the-rspec-book</a></p></li>
<li><p>In-memory browser testing &ndash; Webrat &ndash; <a href="http://wiki.github.com/brynary/webrat">http://wiki.github.com/brynary/webrat</a></p></li>
<li><p>Browser based testing &ndash; Watir &ndash; <a href="http://wtr.rubyforge.org/">http://wtr.rubyforge.org/</a></p></li>
<li><p>Browser based testing &ndash; Selenium &ndash; <a href="http://seleniumhq.org/">http://seleniumhq.org/</a></p></li>
<li><p>Headless Browser testing &ndash; Celerity &ndash; <a href="http://celerity.rubyforge.org/">http://celerity.rubyforge.org/</a></p></li>
<li><p>Using Celerity from within Ruby &ndash; Culerity &ndash; <a href="http://upstream-berlin.com/2009/01/28/culerity-full-stack-rails-testing-with-cucumber-and-celerity/">http://upstream-berlin.com/2009/01/28/culerity-full-stack-rails-testing-with-cucumber-and-celerity/</a></p></li>
<li><p>Website for checking regular expressions &ndash; Rubular &ndash; <a href="http://www.rubular.com/">http://www.rubular.com/</a></p></li>
</ul>


<p>I would like to thank the organisers, everyone who came to listen and speak at the conference. It was a pleasure to be a part of such an enthusiastic group of people in such a beautiful venue.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/ruby/cucumber-waves-goodbye-to-givenscenario.html">Cucumber Waves Goodbye to GivenScenario</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-02-16T21:48:41+01:00" pubdate data-updated="true">Feb 16<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Cucumber as of version 0.2 has removed the GivenScenario feature. GivenScenario was introduced in the original story runner to allow calling a scenario from another within the same feature.</p>

<pre><code>Scenario: setup
  Given ...

 Scenario: example
   GivenScenario setup
  ...
</code></pre>

<p>I initially thought this was a great feature (as mentioned in <a href="/blog/ruby/telling-a-good-story-rspec-stories-from-the-trenches.html">Rspec stories from the trenches</a>). However when I was using GivenScenario I was thinking as a programmer, which is usually where you start going off the tracks when writing features.</p>

<p>Lets look at an example of GivenScenario</p>

<pre><code> Scenario: setup
    Given an author "joe"
    And pages created by "joe":
      | title |    content   |
      | cuke  | just cuke it |

  Scenario: search pages
    GivenScenario setup
    When I search for "cuke"
    Then I should see "just cuke it" 

  Scenario: expanding search result details
    GivenScenario search pages
    When I click "show details" for the first search result
    Then I will see the author "joe"
</code></pre>

<p>This example highlights a number of problems with GivenScenario:</p>

<h3>Difficult to understand isolated scenarios</h3>

<p>While the example might make sense when working sequential through the scenarios in the longer term it produces scenarios that are hard to maintain and understand. Often during the life cycle of a system you will come back to an isolated scenario but in this example you would have to trace through the stack of scenarios to understand the context.</p>

<h3>Creating setups which pretend to be scenarios</h3>

<p>When creating a Scenario to use in GivenScenario often what you are actually expressing is a setup block and not a true scenario.</p>

<h3>Noise in the output</h3>

<p>If you re-use scenarios that contain the normal Given/When/Then it introduces a lot of noise in the output of the features. This is especially the case with multiple ‘Then’s each testing different concepts. Running our example above outputs:</p>

<pre><code>  ...
  Scenario: expanding search result details
    Given an author "joe"
    And pages created by "joe"
      | title |    content   |
      | cuke  | just cuke it |
    When I search for "cuke"
    Then I should see "just cuke it"
    When I click "show details" for the first search result
    Then I will see the author "joe"
  ...
</code></pre>

<h3>Ugly Camel case</h3>

<p>Since the reserved word Given was already used we ended up with GivenScenario. Something that was not natural for non-technical users.</p>

<h3>Summary</h3>

<p>GivenScenarios are like procedure calls but from this analogy they ended up with something that had too much power. This lead to a feature which was easy to misuse and did not cleanly fit with Scenarios and plain text.</p>

<h2>Solutions to GivenScenario</h2>

<p>There are two solutions to replace &lsquo;GivenScenario&rsquo;:</p>

<h3>Calling Steps from Step Definitions</h3>

<p>The ability to <a href="http://wiki.github.com/aslakhellesoy/cucumber/calling-steps-from-step-definitions">call existing steps from step definitions</a> allows us to introduce a hierarchy of abstraction in our steps.</p>

<p>We can have a high level Step:</p>

<pre><code>  Given a basic site  
</code></pre>

<p>Which in turn uses our other steps.</p>

<pre><code> Given /a basic site/ do
    Given 'an author "joe"'
    Given 'pages created by "joe"', table(%{
      | title |    content   |
      | cuke  | just cuke it |
    })
  end
</code></pre>

<p>In contrast to ‘GivenScenario’ this solution pushes the logic down into the step definitions, moving it out of the customers domain and into the developers domain.</p>

<p>This reduces the noise in the feature text allowing us to focus on the real feature and value.</p>

<p>However abstraction is not always the right pattern when trying to add context to your features. There is a danger that high-level steps could lead to confusion, since it pushes details out of sight of the customer.</p>

<h3>Background</h3>

<p><a href="http://wiki.github.com/aslakhellesoy/cucumber/background">Background</a> defines of a set of steps which are implicitly run before every scenario.</p>

<p>This is similar to ‘GivenScenario’ but has some key differences which help overcome some of the problems mentioned:</p>

<ul>
<li><p>Only one Background per feature - No chain of background dependencies are possible</p></li>
<li><p>Background has to be the first feature element in the Feature - We always know where to look for context.</p></li>
<li><p>It&rsquo;s implicitly called in every scenario. - There is no extra noise in the scenarios.</p></li>
<li><p>It&rsquo;s not shown in the output of each scenario (unless there are errors in the background) - There is no extra noise in the output.</p></li>
</ul>


<p>Example:</p>

<pre><code> Background:
    Given an author "joe"
    And pages created by "joe"
      | title |    content   |
      | cuke  | just cuke it |

  Scenario: search pages
    When I search for "cuke"
    Then I should see "just cuke it" 

  Scenario: expanding search result details
    When I search for "cuke"
    And I click "show details" for the first search result
    Then I will see the author 'joe'
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/ruby/speaking-at-scotland-on-rails-2009.html">Speaking at Scotland on Rails 2009</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-01-17T20:20:46+01:00" pubdate data-updated="true">Jan 17<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I’m really excited to be giving a talk at this years <a href="http://scotlandonrails.com/">Scotland on Rails</a> conference in Edinburgh.</p>

<p>I&rsquo;ll be talking about working outside-in with <a href="http://cukes.info/">Cucumber</a> and <a href="http://rspec.info/">RSpec</a>. Having used Cucumber and as a member of the Cucumber core developer team I hope to share lots of experiences and lessons about getting the most out of the tool.</p>

<p>It&rsquo;s looking like a <a href="http://scotlandonrails.com/schedule">great line up</a> with with some really interesting presentations across a broad number of topics. The keynotes speakers are <a href="http://www.michaelfeathers.com/">Michael Feathers</a> and <a href="http://marcelmolina.com/">Marcel Molina, Jnr</a>.</p>

<p>If you’re going to be in Edinburgh for the conference or have any burning questions about Cucumber, let me know.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/ruby/latent-semantic-analysis-in-ruby.html">Latent Semantic Analysis in Ruby</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-21T21:54:47+01:00" pubdate data-updated="true">Nov 21<span>st</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;ve had lots of requests for a Ruby version to follow up my <a href="http://blog.josephwilk.net/projects/latent-semantic-analysis-in-python.html">Latent Semantic Analysis  in Python</a> article. So I&rsquo;ve rewritten the code and article for Ruby. I wrote LSA from scratch this time and test driven so it has some subtle differences from the Python version.</p>

<h2>What is LSA?</h2>

<p>Latent Semantic Analysis (LSA) is a mathematical method that tries to bring out latent relationships within a collection of documents. Rather than looking at each document isolated from the others it looks at all the documents as a whole and the terms within them to identify relationships.</p>

<p>An example of LSA:
Using a search engine search for &ldquo;<em>ruby</em>&rdquo;.</p>

<p>Documents are returned which do not contain the search term &ldquo;<em>ruby</em>&rdquo; but contains terms like &ldquo;<em>rails</em>&rdquo;.</p>

<p>LSA has identified a latent relationship, &ldquo;<em>ruby</em>&rdquo; is semantically close to &ldquo;<em>rails</em>&rdquo;.</p>

<h2>How does it work?</h2>

<p>Given a set of word documents, each word in those documents represents a point in the semantic space. LSA uses a mathematical technique called <a href="http://en.wikipedia.org/wiki/Singular_value_decomposition">Singular value decomposition</a> to take the documents/words represented as a matrix and produce a reduced approximation of this matrix. In doing this it reduces the overall noise in the semantic space bringing words together. Hence after applying LSA some words share similar points in the semantic space, they are semantically similar.</p>

<p>These groups of semantically similar words form concepts and those concepts in turn relate to documents.</p>

<pre><code>Term a &lt;-----------&gt;
Term b &lt;-----------&gt; Concept d &lt;---------&gt; Document e
Term c &lt;-----------&gt;
</code></pre>

<h2>Background Reading on LSA</h2>

<p>There are some very good papers which describe LSA in detail:</p>

<ul>
<li><p>An introduction to LSA: <a href="http://lsa.colorado.edu/papers/dp1.LSAintro.pdf">http://lsa.colorado.edu/papers/dp1.LSAintro.pdf</a></p></li>
<li><p>Creating your own LSA space: <a href="http://www.andrew.cmu.edu/user/jquesada/pdf/bookSpacesRev1.pdf">http://www.andrew.cmu.edu/user/jquesada/pdf/bookSpacesRev1.pdf</a></p></li>
<li><p>Latent Semantic analysis: <a href="http://en.wikipedia.org/wiki/Latent_semantic_indexing">http://en.wikipedia.org/wiki/Latent_semantic_indexing</a></p></li>
</ul>


<p>And on SVD</p>

<ul>
<li><p>SVD recommendation system in ruby: <a href="http://www.igvita.com/2007/01/15/svd-recommendation-system-in-ruby/">http://www.igvita.com/2007/01/15/svd-recommendation-system-in-ruby/</a></p></li>
<li><p>MIT video lectures on SVD: <a href="http://ocw.mit.edu/OcwWeb/Mathematics/18-06Spring-2005/VideoLectures/index.htm">http://ocw.mit.edu/OcwWeb/Mathematics/18-06Spring-2005/VideoLectures/index.htm</a></p></li>
</ul>


<h2>LSA Algorithm</h2>

<p>This is an implementation of LSA in Ruby (v1.8.7). I made use of the <a href="http://rubyforge.org/projects/linalg/">linalg</a> project which while not as mature as Python&rsquo;s <a href="http://www.scipy.org/">SciPy</a> it does the job. Installing linalg can be rather challenging as it relies on <a href="http://www.netlib.org/lapack/">LAPACK</a> which in turn relies on some Fortran code.</p>

<h3>1 Create the term-document matrix</h3>

<p>We take a set of documents and map them to a vector space matrix. Each column represents a document and each row represents a term.</p>

<pre><code>         Document n  Document n+1
term n    [   1           0 ]
term n+1  [   0           1 ]
</code></pre>

<p>Read more about the <a href="http://en.wikipedia.org/wiki/Vector_space_model">Vector Space Model</a> at Wikipedia.</p>

<p>We use the <a href="http://linalg.rubyforge.org/classes/Linalg/DMatrix.html">DMatrix</a> class from Linalg to represent our term-document matrix. This is like the Ruby standard library <a href="does%20provide%20http://www.ruby-doc.org/stdlib/libdoc/matrix/rdoc/classes/Matrix.html">Matrix</a> class but with some powerful matrix functions builtin.</p>

<h3>2 tf-idf Transform</h3>

<p>tf => Term frequency</p>

<p>idf => Inverse document frequency.</p>

<p>Apply the <a href="http://en.wikipedia.org/wiki/Tf-idf">tf-idf</a> transform to the term-document matrix. This generally tends to help improve results with LSA.</p>

<p>Github source file: <a href="http://github.com/josephwilk/rsemantic/tree/master/lib/semantic/transform/tf_idf_transform.rb">tf_idf_transform.rb</a></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>      <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">transform</span><span class="p">(</span><span class="n">matrix</span><span class="p">)</span>
</span><span class='line'>        <span class="n">number_of_documents</span> <span class="o">=</span> <span class="n">matrix</span><span class="o">.</span><span class="n">num_columns</span>
</span><span class='line'>        <span class="vc">@@number_of_documents_with_term</span> <span class="o">=</span> <span class="o">[]</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">matrix</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">each_with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">document</span><span class="p">,</span> <span class="n">column_index</span><span class="o">|</span>
</span><span class='line'>          <span class="n">document_term_total</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">rows</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span><span class="n">word_sum</span><span class="p">,</span> <span class="n">word_count</span><span class="o">|</span> <span class="n">word_sum</span> <span class="o">+</span> <span class="n">word_count</span><span class="o">.</span><span class="n">to_f</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>          <span class="n">document</span><span class="o">.</span><span class="n">rows</span><span class="o">.</span><span class="n">each_with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">term_weight</span><span class="p">,</span> <span class="n">row_index</span><span class="o">|</span>
</span><span class='line'>            <span class="k">unless</span> <span class="n">term_weight</span><span class="o">.</span><span class="n">to_f</span> <span class="o">==</span> <span class="mi">0</span><span class="o">.</span><span class="mi">0</span>
</span><span class='line'>              <span class="n">matrix</span><span class="o">[</span><span class="n">row_index</span><span class="p">,</span> <span class="n">column_index</span><span class="o">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">term_weight</span> <span class="o">/</span> <span class="n">document_term_total</span><span class="p">)</span> <span class="o">*</span>
</span><span class='line'>              <span class="no">Math</span><span class="o">.</span><span class="n">log</span><span class="p">((</span><span class="n">number_of_documents</span> <span class="o">/</span> <span class="n">number_of_documents_with_term</span><span class="p">(</span><span class="n">row_index</span><span class="p">,</span> <span class="n">matrix</span><span class="p">)</span><span class="o">.</span><span class="n">to_f</span><span class="p">)</span><span class="o">.</span><span class="n">abs</span><span class="p">)</span>
</span><span class='line'>            <span class="k">end</span>
</span><span class='line'>          <span class="k">end</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>        <span class="n">matrix</span>
</span><span class='line'>      <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>3 Latent Semantic transform</h3>

<p>Github source file: <a href="http://github.com/josephwilk/rsemantic/tree/master/lib/semantic/transform/lsa_transform.rb">lsa_transform.rb</a></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>      <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="n">number_of_dimensions_to_reduce</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>          <span class="n">columns</span> <span class="o">=</span> <span class="n">matrix</span><span class="o">.</span><span class="n">num_columns</span>
</span><span class='line'>
</span><span class='line'>          <span class="k">if</span> <span class="n">dimensions</span> <span class="o">&lt;=</span> <span class="ss">columns</span><span class="p">:</span> <span class="c1">#Its a valid reduction</span>
</span><span class='line'>            <span class="n">u</span><span class="p">,</span> <span class="n">sigma</span><span class="p">,</span> <span class="n">vt</span> <span class="o">=</span> <span class="n">matrix</span><span class="o">.</span><span class="n">singular_value_decomposition</span>
</span><span class='line'>
</span><span class='line'>            <span class="n">sigma_prime</span> <span class="o">=</span> <span class="n">reduce_dimensions</span><span class="p">(</span><span class="n">number_of_dimensions_to_reduce</span><span class="p">,</span> <span class="n">sigma</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>            <span class="n">matrix_prime</span> <span class="o">=</span> <span class="n">u</span> <span class="o">*</span> <span class="n">sigma_prime</span> <span class="o">*</span> <span class="n">vt</span>
</span><span class='line'>          <span class="k">else</span>
</span><span class='line'>            <span class="k">raise</span> <span class="no">Exception</span><span class="p">,</span> <span class="s2">&quot;dimension reduction cannot be greater than %s&quot;</span> <span class="o">%</span> <span class="n">columns</span>
</span><span class='line'>          <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>          <span class="n">matrix_prime</span>
</span><span class='line'>        <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>The LSA transform consists of 3 stages. Lets take a closer look at these 3 stages:</p>

<h4>1. Singular Value Decomposition</h4>

<p>SVD: <a href="http://en.wikipedia.org/wiki/Singular_value_decomposition">http://en.wikipedia.org/wiki/Singular_value_decomposition</a>
<a href="http://rubyforge.org/projects/linalg/">Linalg</a>&rsquo;s DMatrix has a <a href="http://linalg.rubyforge.org/classes/Linalg/DMatrix.html#M000063">singular_value_decomposition</a> method which saves us a lot of work!</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'> <span class="n">u</span><span class="p">,</span> <span class="n">sigma</span><span class="p">,</span> <span class="n">vt</span> <span class="o">=</span> <span class="n">matrix</span><span class="o">.</span><span class="n">singular_value_decomposition</span>
</span></code></pre></td></tr></table></div></figure>


<h4>2. Reduce the dimensions of Sigma</h4>

<p>We generally delete the smallest coefficients in the diagonal matrix Sigma to produce Sigma&#8217;.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>        <span class="k">def</span> <span class="nf">reduce_dimensions</span><span class="p">(</span><span class="n">number_of_dimensions_to_reduce</span><span class="p">,</span> <span class="n">matrix</span><span class="p">)</span>
</span><span class='line'>          <span class="k">for</span> <span class="n">diagonal_index</span> <span class="k">in</span> <span class="n">dimensions_to_be_reduced</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="n">number_of_dimensions_to_reduce</span><span class="p">)</span>
</span><span class='line'>            <span class="n">matrix</span><span class="o">[</span><span class="n">diagonal_index</span><span class="p">,</span> <span class="n">diagonal_index</span><span class="o">]</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>          <span class="k">end</span>
</span><span class='line'>          <span class="n">matrix</span>
</span><span class='line'>        <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>The reduction of the dimensions of Sigma combines some dimensions such that they are on more than one term. The number of coefficients deleted can depend of the corpus used. It should be large enough to fit the real structure in the data, but small enough such that noise or unimportant details are not modelled.</p>

<p>The <strong>real difficulty and weakness of  LSA</strong> is knowing <strong>how many dimensions to remove</strong>. There is no exact method of finding the right dimensions. Approaches which are used are <a href="http://mathworld.wolfram.com/L2-Norm.html">L2-norm</a> or <a href="http://en.wikipedia.org/wiki/Frobenius_norm#Frobenius_norm">Frobenius norm</a>.</p>

<h4>3. Calculate the Product with New Sigma&#8217;</h4>

<p>Finally we calculate:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'> <span class="n">matrix_prime</span> <span class="o">=</span> <span class="n">u</span> <span class="o">*</span> <span class="n">sigma_prime</span> <span class="o">*</span> <span class="n">vt</span>
</span></code></pre></td></tr></table></div></figure>


<h2>LSA In Action &ndash; rSemantic Gem</h2>

<p>First install the rsemantic gem from Github</p>

<pre><code>gem sources -a http://gems.github.com
sudo gem install josephwilk-rsemantic
</code></pre>

<p>Then we can run an example:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;rubygems&#39;</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;semantic&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="no">D1</span> <span class="o">=</span> <span class="s2">&quot;The cat in the hat disabled&quot;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="no">D2</span> <span class="o">=</span> <span class="s2">&quot;A cat is a fine pet ponies.&quot;</span>
</span><span class='line'><span class="no">D3</span> <span class="o">=</span> <span class="s2">&quot;Dogs and cats make good pets&quot;</span>
</span><span class='line'><span class="no">D4</span> <span class="o">=</span> <span class="s2">&quot;I haven&#39;t got a hat.&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">#verbose mode so it shows us all the different stages</span>
</span><span class='line'><span class="n">search</span> <span class="o">=</span> <span class="ss">Semantic</span><span class="p">:</span><span class="ss">:Search</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="o">[</span><span class="no">D1</span><span class="p">,</span> <span class="no">D2</span><span class="p">,</span> <span class="no">D3</span><span class="p">,</span> <span class="no">D4</span><span class="o">]</span><span class="p">,</span> <span class="ss">:verbose</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>We start with out Model-Term frequency matrix with is generated from creating a Vector Space Search with four documents (D1-D4):</p>

<pre><code>           D1    D2    D3    D4
hat     [ +1.00 +0.00 +0.00 +1.00 ]
dog     [ +0.00 +0.00 +1.00 +0.00 ]
cat     [ +1.00 +1.00 +1.00 +0.00 ]
make    [ +0.00 +0.00 +1.00 +0.00 ]
good    [ +0.00 +0.00 +1.00 +0.00 ]
pet     [ +0.00 +1.00 +1.00 +0.00 ]
fine    [ +0.00 +1.00 +0.00 +0.00 ]
poni    [ +0.00 +1.00 +0.00 +0.00 ]
disabl  [ +1.00 +0.00 +0.00 +0.00 ]
</code></pre>

<p>Apply tf-idf transform:</p>

<pre><code>           D1    D2    D3    D4
hat     [ +0.23 +0.00 +0.00 +0.69 ]
dog     [ +0.00 +0.00 +0.28 +0.00 ]
cat     [ +0.10 +0.07 +0.06 +0.00 ]
make    [ +0.00 +0.00 +0.28 +0.00 ]
good    [ +0.00 +0.00 +0.28 +0.00 ]
pet     [ +0.00 +0.17 +0.14 +0.00 ]
fine    [ +0.00 +0.35 +0.00 +0.00 ]
poni    [ +0.00 +0.35 +0.00 +0.00 ]
disabl  [ +0.46 +0.00 +0.00 &lt;span style="color: #ff0000;"&gt;+0.00&lt;/span&gt; ]
</code></pre>

<p>Perform SVD &ndash; Reduce Sigmas dimensions (removing the 2 smallest coefficients)</p>

<pre><code>           D1    D2    D3    D4
hat     [ +0.34 -0.01 -0.01 +0.63 ]
dog     [ +0.01 -0.00 +0.28 -0.01 ]
cat     [ +0.03 +0.08 +0.06 +0.04 ]
make    [ +0.01 -0.00 +0.28 -0.01 ]
good    [ +0.01 -0.00 +0.28 -0.01 ]
pet     [ +0.01 +0.17 +0.14 -0.01 ]
fine    [ +0.02 +0.35 -0.00 -0.01 ]
poni    [ +0.02 +0.35 -0.00 -0.01 ]
disabl  [ +0.11 +0.02 +0.02 &lt;span style="color: #ff0000;"&gt;+0.19&lt;/span&gt; ]
</code></pre>

<p>Note the Word &lsquo;disabl&rsquo; despite not being in D4 now has a weighting in that document.</p>

<h2>Dependencies</h2>

<ul>
<li><p>linalg &ndash; <a href="http://rubyforge.org/projects/linalg/">http://rubyforge.org/projects/linalg/</a></p></li>
<li><p>stemmer &ndash; <a href="http://stemmer.rubyforge.org/wiki/wiki.pl?HomePage">http://stemmer.rubyforge.org/wiki/wiki.pl?HomePage</a></p></li>
</ul>


<p>Linalg is dependent on <a href="http://www.netlib.org/lapack/">LAPACK</a> which can be a challenge to install.</p>

<p>This article on setting up linalg on Mac OS X helped: <a href="http://www.commonmediainc.com/2008/03/24/building-lapack-and-rubys-linalg-on-mac-os-x/">http://www.commonmediainc.com/2008/03/24/building-lapack-and-rubys-linalg-</a><a href="http://www.commonmediainc.com/2008/03/24/building-lapack-and-rubys-linalg-on-mac-os-x/">on-mac-os-x/</a></p>

<h2>Problems</h2>

<p>LSA assumes the <a href="http://en.wikipedia.org/wiki/Normal_distribution">Normal distribution</a> where the <a href="http://en.wikipedia.org/wiki/Poisson_distribution">Poisson distribution</a> has actually been observed.</p>

<h2>Source Code</h2>

<p>The source code initially shown here has gone through a lot of refactoring and has become much more than just LSA. You can get the full project with source code from github:</p>

<pre><code>git clone git://github.com/josephwilk/rsemantic.git
</code></pre>

<p>And you can read about rSemantic on Github: <a href="http://josephwilk.github.com/rsemantic">http://josephwilk.github.com/rsemantic</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/ruby/rboss-rubygem-for-yahoo-search-boss.html">Rboss RubyGem for Yahoo! Search BOSS</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-23T15:55:59+02:00" pubdate data-updated="true">Aug 23<span>rd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>With <a href="http://developer.yahoo.com/search/boss/">Search BOSS</a> (Build your Own Search Service)  Yahoo has freed up a lot of the restrictions on their previous search service. Like removing the cap on the number of searches and allowing re-purposing of results. I&rsquo;ve been doing some work on using the service in Ruby. I wrote a little RubyGem called Rboss which wraps around the BOSS webservice. It makes life nice and easy using Ruby and <a href="http://developer.yahoo.com/search/boss/">BOSS</a>.</p>

<pre><code>require 'rubygems'
require 'boss'

api = Boss::Api.new('boss-api-key-got-from-yahoo')

#Find news articles that are not older than 7 days
results = api.search_news('monkeys', :age =&gt; '7d')
results.each do |news|
   puts news.title
   puts news.abstract
   puts news.date
   puts news.url
end
</code></pre>

<p>Install Gem from GitHub:</p>

<ol>
<li><p> Add github to gem sources</p>

<p>gem sources -a <a href="http://gems.github.com">http://gems.github.com</a></p></li>
<li><p> Install the gem:</p>

<p>sudo gem install eshopworks-rboss</p></li>
<li><p> If you don&rsquo;t already have a BOSS api key signup for one: <a href="http://developer.yahoo.com/wsregap">http://developer.yahoo.com/wsregap</a></p></li>
</ol>


<p>Checkout the Rboss documentation and example usage at: <a href="http://github.com/eshopworks/rboss-gem/tree/master">http://github.com/eshopworks/rboss-gem</a></p>

<p>Thanks to <a href="http://www.eshopworks.co.uk/">eShopworks</a> for sponsoring this project.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/ruby/telling-a-good-story-rspec-stories-from-the-trenches.html">Telling a Good Story - Rspec Stories From the Trenches</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-15T18:19:55+02:00" pubdate data-updated="true">Aug 15<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;ve been developing multiple systems using Rspec stories for a little while now. There are a lot of great resources to get you started with a taste of what you can do with stories. Some of the resources I found useful where:</p>

<ul>
<li><p><a href="http://peepcode.com/products/rspec-user-stories">http://peepcode.com/products/rspec-user-stories</a></p></li>
<li><p><a href="http://blog.davidchelimsky.net/2008/6/16/slides-from-railsconf">http://blog.davidchelimsky.net/2008/6/16/slides-from-railsconf</a></p></li>
<li><p><a href="http://www.benmabey.com/2008/02/04/rspec-plain-text-stories-webrat-chunky-bacon/">http://www.benmabey.com/2008/02/04/rspec-plain-text-stories-webrat-chunky-bacon/</a></p></li>
<li><p><a href="http://dannorth.net/whats-in-a-story">http://dannorth.net/whats-in-a-story</a></p></li>
<li><p><a href="http://evang.eli.st/blog/2007/10/8/story-runner-top-to-bottom-screencast">http://evang.eli.st/blog/2007/10/8/story-runner-top-to-bottom-screencast</a></p></li>
</ul>


<p>However once I had understood the basic idea I struggled to find practical examples and general guidance on writing real stories. So I&rsquo;ve collected some of the lessons I&rsquo;ve learnt along the way  with story examples taken from real systems and how I&rsquo;ve improved them as I learnt. Most examples are from web based applications.</p>

<p>There are no absolutes in these lessons, they are general rules. If the customer is NASA and they want an extremely explicit and low level story then that is fine. Really stories are the customers expressions of requirements and each customer may want to express these in different ways.</p>

<p>On the other hand it is often you helping the customer take those first baby steps into using stories. They turn to you for guidance until they can stand on their own two feet.</p>

<h2>Stories are not specs!</h2>

<p>Specs are your unit tests, they&rsquo;re fast and lean and always running, helping you refactor and develop your code. They describe the system at the object level (and dependent on how you mock/stub they do this in isolation). Stories are like integration tests, they document how your system works. They help you know that your system meets the customers requirements.</p>

<p>Your spec test is going to care about testing each action in your controller.</p>

<p>Your story is going to care about usage of the system cutting through models/controllers/views.</p>

<p>Hence specs tend to have a high coverage while <strong>stories cover only that which is important to the customer!</strong></p>

<p>Some people do run their stories continuously like their specs (which is only really practical if you are using only <a href="http://agilewebdevelopment.com/plugins/webrat">Webrat</a>). Generally I only run my stories before a commit and I also have them running on a continuous integration server (<a href="http://cruisecontrolrb.thoughtworks.com/">CruiseControl.rb</a>) on every commit.</p>

<h2>Keep the story goals as real values for the customer</h2>

<pre><code>Story: Search
  As a website user
  I want a search box
  So that I can enter terms and click search
</code></pre>

<p>Why does the website user want to enter terms and click search?
To find things!</p>

<pre><code>Story: Search
  As a website user
  I want to search
  So that I can find content on the website
</code></pre>

<p>This is where what David Chelimsky mentions as &lsquo;popping the &ldquo;why&rdquo;? stack&rsquo; helps us keep focused on real customer values.</p>

<h2>Stories should not be exhaustive</h2>

<pre><code>Story: Changing pages urls
  As a website user
  I want to change the URLs of pages
  So that I can improve any bad urls

Scenario: valid url
Scenario: blank url
Scenario: symbol url
Scenario: character url
Scenario: numeric url
</code></pre>

<p>I find here we can get a bit more generic and concentrate of what is really important in this story. There are two different behaviours valid and invalid. (This does bring up the idea that stories can follow a behavioural or stateful approach, which I&rsquo;ll leave as a discussion for another time)</p>

<pre><code>Story: Changing page urls
  As a website user
  I want to change the URLs of pages
  So that I can improve any bad urls

Scenario: invalid url
  Given a title which is invalid in a url
  When I save
  Then it should show me an error message telling me why it was invalid

Scenario: valid url
  Given a title which is valid in a url
  When I save
  Then it should not show me an error message
</code></pre>

<p>This serves as a good base for  the client to add to and refine as their requirements evolve. I prefer the stories to facilitate discussion rather than being documentation which starts to happen when you get too exhaustive.</p>

<h2>Stories should speak with the customers domain terminology</h2>

<p>Ideally your stories should be written by the customer in their terminology. Even if you don&rsquo;t have direct access to a customer try putting yourself in their shoes.</p>

<p>With web applications if you find yourself mentioning things like &lsquo;database&rsquo;, &lsquo;views&rsquo;, &lsquo;controllers&rsquo;, &lsquo;models&rsquo; and &lsquo;sql&rsquo; your writing like a programmer and not an average customer (Well that&rsquo;s what I&rsquo;ve generally found).
In the previous example note how we saved a whole lot of work by saying:</p>

<pre><code>'valid in a url'
</code></pre>

<p>Rather than defining explicitly the different rules for what is a valid url in the story. So using the domain terminology can help make your stories more concise.</p>

<h2>Stories should not be too low level.</h2>

<pre><code>Story: Viewing homepage
  As a logged in user
  I want to view my homepage
  So that I will see it

Scenario: login
  Given I'm logged in
  When I visit my homepage
  Then I will see it
</code></pre>

<p>If it takes you longer to write the story than complete the task its too small. When you end up with a couple of stories which are too small general its a good idea to combine them to form a more reasonably sized story. In this case I took the Viewing homepage story and combined it with a set of small stories:</p>

<pre><code>Story: Important pages are accessible
  As a logged in user
  I want to visit key pages in the site
  So that I can successful navigate around it&lt;span style="text-decoration: line-through;"&gt;
&lt;/span&gt;
Scenario: Homepage
Scenario: Login page
Scenario: Payment page
</code></pre>

<h2>Stories should not be too high level.</h2>

<p>Stories that are too large are referred to as Epic stories. Epics tend to occur when the story scenarios are trying to be too exhaustive or the story is a:</p>

<ul>
<li><p>Compound story &ndash; comprises multiple shorter stories</p></li>
<li><p>Complex story &ndash; Cannot easily be broken down into smaller stories</p></li>
</ul>


<p>An example of an epic:</p>

<pre><code>Story: Manage Content
  As a admin user
  I want to manage my sites pages
  So that I can keep my website up-to-date

Scenario: Add a page
Scenario: Delete a page
Scenario: Edit a page
</code></pre>

<p>I find a good guideline is that a story should be accomplishable in around 1 week.</p>

<p>There are two ways you can split a epic story into snappy short stories:</p>

<p><strong>Split Along create, add, edit and delete.</strong>
<em>or</em>
<strong>Disaggregate along the boundaries of the data</strong></p>

<p>So initially I went with disaggregating along the data boundaries but still found the stories where looking big, so I then tried splitting on actions which left me with some nice snappy stories.</p>

<pre><code>Story: Add page
  As a admin user
  I want to add pages
  So that I can keep my website up-to-date

Scenario: ...

Story: Delete page
  As a admin user
  I want to delete pages
  So that I can remove bad or old articles

Scenario: ...

Story: Edit page
  As a admin user
  I want to edit pages
  So that I can refine my articles as time passes

Scenario: ...
</code></pre>

<p>Note how our understanding of the users goals has expanded here. We know in more detail what the user wants from the system.</p>

<p>When choosing which way to split stories I often write out what the stories and scenarios would look like which helps me get a feeling for which splitting method is best suited.</p>

<h2>Stories should concentrate on outputs not inputs</h2>

<pre><code>Story: Creating an account
  As a new user to the site
  I want to create a account for the site
  So that I can login and comment on articles

Scenario: valid account details
  Given I'm logged out
  And I've entered my username 'spoink'
  And I've entered my website 'http://www.joesniff.co.uk'
  And I've entered my email address 'spoink@joesniff.co.uk'
  And I've entered my password 'poodle'
  And I've entered my password 'poodle'
  And I've entered a password reminder 'not a monkey'
  And I've selected 'do not send me emails'
  And I've selected 'I agree to terms and conditions'
  When I click the create account button
  Then my account will be created
  And I will be redirected to my account page
</code></pre>

<p>Outputs represent value to the customer. They tend to be far more interested in what they get out of the system than what they put in.</p>

<pre><code>Story: Creating an account
  As a new user to the site
  I want to create a account for the site
  So that I can login and comment on articles

Scenario: valid account details
  Given I'm logged out
  When I create a new account
  Then I will be redirect to my account page
  And I will be presented with the last time I logged in
  And my current community ranking
  And the last comment I made.
</code></pre>

<p>In this example focusing on all the details of creating an account while useful missed the fact that the most important thing to the client was why the user was creating the account and what benefit/output they got that kept them there.</p>

<h2>Stories should slice through multiple layers</h2>

<p>Stories act as integration tests cutting through all the layers of your web application stack.</p>

<p>If you only cut through certain layers you introduce the possibility that the stories pass without parts of your system working!</p>

<pre><code>Story: Fill in form
  As a logged in user
  I want to fill in a register form
  So that I can register

Story: Save in database
  As a logged in user
  I want my form information saved in the database
  So that the system remembers me
</code></pre>

<p>Yuck! Hearing the user talk about &lsquo;the database&rsquo; is a sure sign these stories have problems.</p>

<h2>Stories should be kept organised</h2>

<p>I tend to use one of two ways of organising my stories in the file system:</p>

<h3>1. Organise by Stakeholder</h3>

<p>Contain the stories based on which stakeholder is acting in the story.</p>

<pre><code>stories/
  customer/
    purchase.story
    purchase.rb
  web_master/
    ...
  advertiser/
    ...
</code></pre>

<h3>2. Organise by Feature</h3>

<p>Contain the stories based on which feature stories relate to. (This is particularly useful if you&rsquo;re structure follows Epic &ndash;> Feature &ndash;> Story ).</p>

<pre><code>stories/
  page_editing/
    edit_page.story
    edit_page.rb
  image_uploading/
    ...
  login
    ...
</code></pre>

<h2>Use GivenScenario to make Stories easier to read and discuss</h2>

<p>GivenScenario allows you to reuse scenarios which can help make the stories clean and in turn easier to discuss with the customer.</p>

<pre><code>Story: maintaining blog
  As a web admin
  I want to manage pages within an admin system
  So I can keep my blog up to date

Scenario: Add page
  ...

Scenario: edit page with valid details
  GivenScenario: Add page
  When I edit pages details
  Then it should save without errors
</code></pre>

<h2>Stories should not leave hidden magic in steps</h2>

<p>When scenarios start to fail in your stories its often up to the developer to have a look why. You often turn to the story to check the steps.</p>

<pre><code>...
  Given there is a page 'testing'
...




Given(/there is a page '(.+)'/) do |title|
  @page = Page.create!({ :title =&gt; title)
  @page.images = Image.create!({ :test )
end
</code></pre>

<p>Misleading or not revealing hidden steps can making debugging stories a painful process.
I changed the story to make sure it was obvious what was going on:</p>

<pre><code>...
  Given there is a page 'testing' with an image 'test'
...
</code></pre>

<h2>Make your Given/When steps fail loudly</h2>

<p>Stories can be hard to debug. Anything in the Given &amp; When could have failed but we are only aware of a Then failing. So we have to search back through the Givens and Whens to spot an error.</p>

<p>The following could fail but the step would pass.</p>

<pre><code>Given('there is a page') do
  Page.create {:title =&gt; 'explode early'}
end
</code></pre>

<p>By throwing an exception we can ensure that if anything goes wrong the step fails</p>

<pre><code>Given('there is a page') do
 Page.create! {:title =&gt; 'explode early'}
end
</code></pre>

<h2>Avoid relying heavily on instance values in steps</h2>

<p>Relying on using instance values makes it difficult to reuse your steps. Also Interdependencies between steps can make them harder to debug.</p>

<pre><code>Given('there is a page') do
 @page = Page.create! {:title =&gt; 'dont do it!'}
end
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/ruby/rubyrails-interview-questions.html">Ruby/Rails Interview Questions</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-25T21:39:48+02:00" pubdate data-updated="true">Jul 25<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;ve recently been helping interview some ruby/rails developers. I searched the web for some inspiration but I could not find any example questions that had real depth to them. I like my questions to be a point of discussion rather than one word answers. Most importantly I want a wide enough scope to let those talented individuals shine through. So here are some of the questions I&rsquo;ve been trying out recently.</p>

<p><strong>1.</strong> You are getting the chance to fly in the worlds first unmanned Airplane who&rsquo;s systems are written only in ruby. Would you fly in it? Explain your reasoning</p>

<p><strong>2.</strong> Ruby is great and everything but its nothing more than a prototyping language. Its just too hacky and dynamic for any real production system. Why bother with its messy Perl lineage and the lack of internationalisation support when you could just use Python? Discuss.</p>

<p><strong>3. </strong>Ruby takes a unique approach to the problem of multiple inheritance. Explain ruby&rsquo;s approach and the strengths and weaknesses of it.</p>

<p><strong>4.</strong> Do you think adding behaviour to the builtin core Ruby classes is a good idea? Can you give some examples to backup your opinion.</p>

<p><strong>5.</strong> Explain why in ruby nil.object_id is equal to 4. (<em>Rather nasty question, really asking about C</em>)</p>

<pre><code>&gt;&gt; nil.object_id
=&gt; 4
</code></pre>

<p><strong>6.</strong> Twitter(<a href="http://www.twitter.com">http://www.twitter.com</a>) is a website built on Ruby on rails. It is a</p>

<blockquote><p>&ldquo;Social networking and microblogging service utilising instant messaging, SMS or a web interface.&rdquo;</p></blockquote>

<p>Why do you think twitter (<a href="http://twitter.com/">http://www.twitter.com</a>) used Ruby on Rails?</p>

<p>Do you think it was a good decision?</p>

<p><strong>7.</strong> Explain  what &lsquo;has_many&rsquo; is and what happens when it is run.</p>

<pre><code>class Monkey &lt; ActiveRecord::Base
  has_many :bananas
end
</code></pre>

<p><strong>8.</strong> Given a simple website focused on a REST model and produced solely by using script/generate scaffold. Explain what happens in the rails application when a user submits a form with a POST request to: &lsquo;/images/1&rsquo;. State any assumptions you make.</p>

<hr />

<p><strong>9.</strong> If each language was represented as a person what type of person would each be and why?</p>

<ul>
<li><p>Ruby person</p></li>
<li><p>Python person</p></li>
<li><p>Php person</p></li>
<li><p>Java person</p></li>
</ul>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/6/">&larr; Older</a>
    
    <a href="/blog/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/4/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/clojure/overtone-driving-minecraft.html">Clojure and Overtone driving Minecraft</a>
      </li>
    
      <li class="post">
        <a href="/blog/art/live-coding-repl-electric.html">Live Coding - Repl Electric</a>
      </li>
    
      <li class="post">
        <a href="/blog/clojure/creative_machines.html">Creative Machines</a>
      </li>
    
      <li class="post">
        <a href="/blog/clojure/sounds-of-the-human-brain.html">Sounds of the human brain</a>
      </li>
    
      <li class="post">
        <a href="/blog/clojure/building-clojure-services-at-scale.html">Building Clojure services at scale</a>
      </li>
    
      <li class="post">
        <a href="/blog/clojure/creating-instruments-with-overtone.html">Creating sampled instruments with Overtone</a>
      </li>
    
      <li class="post">
        <a href="/blog/elixir/sets-in-elixir.html">Sets in Elixir</a>
      </li>
    
      <li class="post">
        <a href="/blog/clojure/isolating-external-dependencies-in-clojure.html">Isolating external dependencies in Clojure</a>
      </li>
    
      <li class="post">
        <a href="/blog/presentations/a-developers-guide-to-creating-presentations.html">A developers guide to creating presentations</a>
      </li>
    
      <li class="post">
        <a href="/blog/software-craftmanship/the-aesthetics-of-density.html">The Aesthetics of Density</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/josephwilk">@josephwilk</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'josephwilk',
            count: 10,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/blog/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Joseph Wilk -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'josephwilk';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
