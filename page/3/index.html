
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Joseph Wilk</title>
  <meta name="author" content="Joseph Wilk">

  
  <meta name="description" content="Failure Rates vs Change Rates I&rsquo;ve been spending a lot of  time recently data mining our test suite at Songkick.com. I&rsquo;ve been using our &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://josephwilk.github.io/page/3/index.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Joseph Wilk" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<script src="http://disqus.com/forums/josephwilk/embed.js"></script>
<link href="http://fonts.googleapis.com/css?family=Bevan" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3020740-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <img src="/images/joe_small.jpg" style="position:relative;border-radius: 8px;margin-right: 5px;border-style: solid;border-width: 1px;border-color: #DDD;" height="60" alt="Joseph Wilk">
  <span style="display:inline-block">
    <h1><a href="/">Joseph Wilk</a></h1>
    <h2>Programming bits and bobs</h2>
  </span>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:josephwilk.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
 <li><a href="/">Home</a></li>
 <li><a href="/about">About</a></li>
 <li><a href="/speaking">Speaking</a></li>
 <li><a href="/contact">Contact</a></li>
 <li><a href="/archives">Archives</a></li>
</ul>
</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/cucumber/mining-cucumber-features.html">Mining Cucumber Features</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-26T18:00:23+01:00" pubdate data-updated="true">Jul 26<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Failure Rates vs Change Rates</h2>

<p>I&rsquo;ve been spending a lot of  time recently data mining our test suite at Songkick.com. I&rsquo;ve been using our own internal version of <a href="http://www.limited-red.com">www.limited-red.com</a> which records all our test fails for every build on our continuous integration server.</p>

<p>With the Cucumber features I decided to plot the number of times a feature file has been significantly changed vs the number of times the feature has failed in the build. The theory being that a change to a feature file(the plain text specification of behaviour) most often represents a chance in functionality.</p>

<p>So I wrote a simple script checking the number of commits to each feature file.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">features_folder</span> <span class="o">=</span> <span class="no">ARGV</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
</span><span class='line'><span class="n">feature_files</span> <span class="o">=</span> <span class="no">Dir</span><span class="o">[</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">features_folder</span><span class="si">}</span><span class="s2">/**/*.feature&quot;</span><span class="o">]</span>
</span><span class='line'>
</span><span class='line'><span class="n">feature_files</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">feature_file</span><span class="o">|</span>
</span><span class='line'>  <span class="n">change_logs</span> <span class="o">=</span> <span class="sb">`git log --oneline </span><span class="si">#{</span><span class="n">feature_file</span><span class="si">}</span><span class="sb"> 2&gt;/dev/null`</span>
</span><span class='line'>  <span class="n">change_count</span> <span class="o">=</span> <span class="n">change_logs</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">feature_file</span><span class="si">}</span><span class="s2">,</span><span class="si">#{</span><span class="n">change_count</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Feature changes compared with feature failures</h2>

<p>Throwing that into a pretty graph, here is a snapshot of some of the features (I&rsquo;ve changed the name of the features to hide top secret Songkick business).</p>

<p><img src="/images/blog/2011/07/feature_change_vs_failure1.png" alt="" /></p>

<h3>Insights</h3>

<p>Based on this I identified two possible groups of features:</p>

<ul>
<li><p>Features failing more often than the code around them is changing</p></li>
<li><p>Features which are robust and are not breaking when the code around them is changing.</p></li>
</ul>


<p>Further investigation into the suspect features highlighted 3 causes:</p>

<ul>
<li><p>Brittle step definitions</p></li>
<li><p>Brittle features coupled to the UI</p></li>
<li><p>Tests with a high dependency on asynchronous behaviour</p></li>
</ul>


<h2>Holes in the data &ndash; step definitions</h2>

<p>We only recorded the change rate of features files in Git. Features could be broken without ever changing the feature file, for example if a common step definition is broken. Next steps are to identify all the step definitions used by a feature and examine how often the step definitions have changed.</p>

<p>First find the change count for all the step definitions.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">step_files</span> <span class="o">=</span> <span class="no">Dir</span><span class="o">[</span><span class="s2">&quot;features/**/*_steps.rb&quot;</span><span class="o">]</span>
</span><span class='line'>
</span><span class='line'><span class="n">step_files</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">step_file</span><span class="o">|</span>
</span><span class='line'>  <span class="n">change_logs</span> <span class="o">=</span> <span class="sb">`git log --oneline </span><span class="si">#{</span><span class="n">step_file</span><span class="si">}</span><span class="sb"> 2&gt;/dev/null`</span>
</span><span class='line'>  <span class="n">change_count</span> <span class="o">=</span> <span class="n">change_logs</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">count</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">step_file</span><span class="si">}</span><span class="s2">,</span><span class="si">#{</span><span class="n">change_count</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then working out what step definitions a feature uses.  We can do this by running cucumber with the json formatter and match up step definitions (and hence step definition files) to feature files:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;json&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="sb">`cucumber features --dry-run --format json --out .json.out`</span>
</span><span class='line'><span class="n">features_json</span> <span class="o">=</span> <span class="no">JSON</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;.json.out&#39;</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="n">stats</span> <span class="o">=</span> <span class="no">Hash</span><span class="o">.</span><span class="n">new</span><span class="p">{</span><span class="o">|</span><span class="n">h</span><span class="p">,</span><span class="n">k</span><span class="o">|</span> <span class="n">h</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="o">[]</span><span class="p">}</span>
</span><span class='line'><span class="n">features_json</span><span class="o">[</span><span class="s1">&#39;features&#39;</span><span class="o">].</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">feature</span><span class="o">|</span>
</span><span class='line'>  <span class="n">feature_name</span> <span class="o">=</span> <span class="n">feature</span><span class="o">[</span><span class="s1">&#39;name&#39;</span><span class="o">]</span>
</span><span class='line'>  <span class="c1">#The JSON does not have the feature file. Find the file via the feature name. Messy</span>
</span><span class='line'>  <span class="n">feature_file</span> <span class="o">=</span> <span class="sb">`egrep -riE &quot;feature:? *</span><span class="si">#{</span><span class="n">feature_name</span><span class="si">}</span><span class="sb">&quot; features/`</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
</span><span class='line'>  <span class="n">feature</span><span class="o">[</span><span class="s2">&quot;elements&quot;</span><span class="o">].</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">element</span><span class="o">|</span>
</span><span class='line'>    <span class="n">element</span><span class="o">[</span><span class="s2">&quot;steps&quot;</span><span class="o">].</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">step</span><span class="o">|</span>
</span><span class='line'>      <span class="n">file_location</span> <span class="o">=</span> <span class="n">step</span><span class="o">[</span><span class="s1">&#39;match&#39;</span><span class="o">][</span><span class="s1">&#39;location&#39;</span><span class="o">]</span>
</span><span class='line'>      <span class="n">file</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">file_location</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">file</span> <span class="o">=~</span> <span class="sr">/_steps\.rb$/</span>
</span><span class='line'>        <span class="n">stats</span><span class="o">[</span><span class="n">feature_file</span><span class="o">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">stats</span><span class="o">[</span><span class="n">feature_file</span><span class="o">]</span> <span class="o">+</span> <span class="o">[</span><span class="n">file</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">uniq</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="n">pp</span> <span class="n">stats</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Change rate vs Failure rate with step definition changes</h2>

<p>Combining those two bits of data we can now add to our original graph the step definition change rates for a feature.
<img src="/images/blog/2011/07/with_steps.png" alt="" /></p>

<p>We also can examine an individual break down of the step definition change rates for a feature:</p>

<p><img src="/images/blog/2011/07/step_def.png" alt="" /></p>

<h2>Holes in using the step definition change rate</h2>

<p>The step definition changes from git are at the file level (the *_step.rb file) so a change in git may not touch a step definition used by a feature. Hence we may be counting changes which are not relevant for a feature. Further work would be to examine the git diffs and check if a change touched a step definition used by a feature.</p>

<h2>Conclusions</h2>

<p>Our tests hide lots of interesting information that can provide evidence of areas we can make improvements. It&rsquo;s important to realise that like anything in statistics our data mining does not yield facts, just suggestions. At Songkick we are already mining this information with Cucumber and using it to help improve and learn about our tests.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/personal/conferences-and-accessibility-please-try-harder.html">Conferences and Accessibility: Please Try Harder</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-27T13:25:23+01:00" pubdate data-updated="true">Jun 27<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I speak at a lot of conferences around the world and I&rsquo;ve been happy to hear a lot of healthy debate around the diversity of the programming community. I really enjoyed and felt inspired by the talk from <a href="http://blogs.thewehners.net/josh">Joshua Wehner</a> on &ldquo;Must It Always Be About Sex&rdquo; at <a href="http://nordicruby.org/">Nordic Ruby</a> and <a href="http://rulu.eu/">Ruby Lugdunum.</a></p>

<p>It got me thinking about the issue of accessibility at conferences. I use a wheelchair and happily throw myself at any conference irrelevant of the obstacles. But not everyone is as crazy or as flexible as I am. Once at the conference the organisers are always willing to help but I wonder if we are not excluding disabled people who may dimiss the chance to talk or attend as unfeasible due to lack of information about access. Even if thats only a few people, those people are valuable members of our communities and deserve the chance to participate if they want to.</p>

<p>How would we ever know if we were discriminating, if no-one turns up in a wheelchair we are none the wiser.</p>

<p>I understand conferences are expensive and complicated events to organise. I would ask two small things of every conference organiser:</p>

<p><strong>1. Try and select an accessible venue if possible. For both speakers and attendees.</strong></p>

<p><strong>2. Make it clear on the conference website if the venue, party, hack sessions are accessible or not.</strong></p>

<p>My life was profoundly changed through speaking and attending conferences, in many ways beyond programming. I hope we can make sure anyone who wants that opportunity won&rsquo;t be put off.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/startups/startups-infiltrating-agile-and-xp.html">Startups Infiltrating Agile and XP</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-05-27T16:34:00+01:00" pubdate data-updated="true">May 27<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/images/blog/2011/05/Agile2011-badge.jpg" alt="" /> I&rsquo;m very excited to be talking at this years <a href="http://agile2011.agilealliance.org/">Agile2011</a> conference. Its a goal I&rsquo;ve been working towards for a long time.</p>

<p>I&rsquo;ve been to lots of agile conferences where I have listen to consultants talk about how they have made their multi-nationals or large organisations better through x. Interesting but often not much I could take away and apply at a startup.</p>

<p>Sadly there are only 4 talks at Agile2011 tagged with <em>Startups</em> and 6 tagged with <em>Lean Startup</em>.</p>

<p>I&rsquo;m passionate about startups and I want there to be more focus at agile events around them. Having spoken to lots of startups all over the world and living in the London startup hub, I all to often hear people dismiss Agile and XP events as not relevant. While there is a lot of activity around the <a href="http://en.wikipedia.org/wiki/Lean_Startup">Lean Startup</a> little is said about <a href="http://www.extremeprogramming.org/">Extreme Programming</a> and startups. The rich experience of the Agile community tends to  get lost. The Lean Startup has provided a movement which has helped deliver ideas from agile to startups, something agile conferences have failed at.</p>

<p>I&rsquo;m happy to be injecting a dose of startup with my talk at Agile2011 about <a href="http://submit2011.agilealliance.org/node/10782">Acceptance testing in the world of the startup</a>. I&rsquo;ll be drawing from my experiences of working at the startup <a href="http://www.songkick.com">Songkick.com</a>. Looking at the things we did badly, things we did well and things we still have no clue about.</p>

<p>I&rsquo;m also helping organise events in London and other major cities around Extreme Programming and Startups.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/training/the-art-of-cucumber-london-workshop.html">The Art of Cucumber London Workshop</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-04-26T11:21:13+01:00" pubdate data-updated="true">Apr 26<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="/images/blog/2011/04/1588795129-3.png"><img src="/images/blog/2011/04/1588795129-3.png" alt="" /></a>I&rsquo;ll be hosting a &frac12; workshop &ldquo;The Art of Cucumber&rdquo; at Skillsmatters in London. If you are interested in learning more about Cucumber, understanding how Cucumber can fit in software development and patterns for writing healthy Cukes this workshop is for you.</p>

<p>The workshop will also give you a sneak peek into my talk at Agile2011 (Salt Lake City)  and Spa2011 (London) without the big conference ticket price.</p>

<p>Book a place: <a href="http://theartofcucumber.eventbrite.com/">http://theartofcucumber.eventbrite.com/</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/testing/testing-outside-of-the-ruby-world.html">Testing Outside of the Ruby World</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-04-11T13:48:29+01:00" pubdate data-updated="true">Apr 11<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I recently spoke at the Scotland Ruby Conference about interesting testing tools and ideas outside of the Ruby community. The goal was to inspire the Ruby community to push the state of the art in testing.</p>

<h2>Slides</h2>

<script async class="speakerdeck-embed" data-id="4e7b46a413614c003f000dc9" data-ratio="1.33333333333333" src="//speakerdeck.com/assets/embed.js"></script>


<h2>Further Resources</h2>

<ul>
<li><p><a href="http://www.haskell.org/haskellwiki/Introduction_to_QuickCheck">QuickCheck</a> &ndash; Haskell</p></li>
<li><p><a href="https://babel.ls.fi.upm.es/trac/McErlang/">McErlang</a> &ndash; Erlang</p></li>
<li><p><a href="https://github.com/marick/Midje/wiki">Midje</a> &ndash; Clojure</p></li>
<li><p><a href="http://ioke.org/">Ioke</a></p></li>
<li><p><a href="http://zombie.labnotes.org/">Zombie.js</a> &ndash; Javascript</p></li>
<li><p><a href="http://vowsjs.org/">Vows</a> &ndash; Javascript</p></li>
<li><p><a href="http://swarm.jquery.org/">TestSwarm</a> &ndash; Javascript</p></li>
<li><p><a href="http://www.threeriversinstitute.org/junitmax/subscribe.html">JUnitMax</a> &ndash; Java</p></li>
<li><p><a href="http://www.industriallogic.com/">Industrial Logic</a> &ndash; Java</p></li>
<li><p><a href="http://video.google.com/videoplay?docid=8755259214603465036#">Swim Lanes</a> &ndash; Ward Cunningham</p></li>
<li><p><a href="http://www.exampler.com/blog/2007/06/14/graphical-tests-again/">Graphical Tests</a> &ndash; Brian Marick</p></li>
<li><p><a href="http://www.quality-testing.com/wp-content/uploads/2009/06/testheuristicscheatsheetv1.pdf">Test Heuristics Cheat Sheet</a> &ndash; Elisabeth Hendrickson</p></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/agile/story-smells-the-valueless-story.html">Story Smells: The Valueless Story</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-10T15:00:17+00:00" pubdate data-updated="true">Mar 10<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>&ldquo;Why bother discussing the value or writing it down for the stories, everybody already knows what it is&rdquo;</p></blockquote>

<h2>Problem</h2>

<p>The value of a story to a stakeholder is not discussed or written on a card. The group participating in story writing workshop feel there is no point in dealing with the value since it seems obvious.</p>

<p>To a degree this is true, we should (hopefully) already know the high level business values that we want to achieve before we try and write any story cards. Otherwise we may end up with a <a href="http://blog.nayima.be/2009/12/30/how-do-you-estimate-the-business-value-of-user-stories/">vomit of user stories</a></p>

<p>Avoiding discussing or writing down the value on story cards can result in cards like this:</p>

<p><img src="/images/blog/2011/02/IMG_0473.jpg" alt="" /></p>

<h3>Whose value is it anyway?</h3>

<p>While we may already know our business values when writing stories I tend to shift the discussion to the users value. We know what we want, now why is a user going to do what we want? Note that this shift does not always apply, sometimes we want to force a user to do something that they don&rsquo;t want to do (such as filling in a captcha).</p>

<h2>Problems</h2>

<h3>Not discussing the value</h3>

<ul>
<li><p>Miss uncovering differences in underlying assumptions about why this feature is wanted.</p>

<ul>
<li>I&rsquo;ve witnessed too many groups who when jogged to think about the value start asking the right questions and discovering underlying differences in otherwise implicit assumptions.</li>
</ul>
</li>
<li><p>Create features you don&rsquo;t need </p>

<ul>
<li><a href="http://www.theregister.co.uk/2007/06/25/thoughtworks_req_manage/">popping the value stack</a> helps identify if you really need to build a feature.</li>
</ul>
</li>
</ul>


<h3>Not writing the value on a story card</h3>

<ul>
<li><p>Difficultly Prioritizing cards</p>

<ul>
<li>Knowing the value to a role of a feature can help guide a cards prioritisation.</li>
</ul>
</li>
<li><p>Physical cards on a board without any value, mean its not clear quickly why you are building this feature.</p>

<ul>
<li>When a card is being worked on by various roles knowing the value helps guide you to re-assess and ask relevant questions through the cards journey to being delivered.</li>
</ul>
</li>
</ul>


<h3>Using high level obvious values</h3>

<p>This problem can also be a symptom of expressing the value at too high a level. We all know we need to:</p>

<ul>
<li>Protect revenue</li>
<li>Increase revenue</li>
<li>Manage cost</li>
<li>Increase brand value</li>
<li>Make the product remarkable</li>
<li>Provide more value to your customers</li>
</ul>


<p>So putting it as a value for a narrative feels contrived and pointless.</p>

<h2>Solutions</h2>

<h3>Ask &lsquo;why?&rsquo;</h3>

<p>If a group feels the value is obvious they will have no trouble popping the why stack. Popping the why stack quickly uncovers questions and can lead to a refinement of what seemed obvious. At worst everyone in the group  has a shared understanding alining what they all saw as obvious.</p>

<h3>Feature Injection</h3>

<p>Try and structure narratives using the <a href="http://lizkeogh.com/2010/02/02/theyre-not-user-stories/">Feature injection format</a>:
<img src="/images/blog/2011/02/IMG_0475.jpg" alt="" /></p>

<p>Starting with the value as the very first thing you write can help ensure you don&rsquo;t progress onto the other points until you have at least discussed it.</p>

<h3>Avoid obvious values</h3>

<p>Make sure when you&rsquo;re discussing the value you drop down from the highest value to something that seems sensible to everyone.</p>

<h2>But what if the value really is obvious.</h2>

<p>Ok, sometimes a value does seem obvious, perhaps it&rsquo;s the same as a previous card. It is still important to write it down for the story and at least ask the question &lsquo;is this value obvious to everyone?&rsquo; and &lsquo;is this value meaningful to everyone?&rsquo;. Sometimes that is discussion enough.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/cucumber/page-object-pattern.html">Page Object Pattern</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-09T12:00:23+00:00" pubdate data-updated="true">Mar 9<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>What Is the Page Object Pattern?</h2>

<p>The Page model is a pattern that maps a UI page to a class, where for example a page could be a HTML page. The functionality to interact or make assertions about that that page is captured within the Page class. Then these methods may be called by a test. So ultimately we are introducing a gatekeeper to the GUI of a page.</p>

<p><img src="/images/blog/2010/12/page-model1.png" alt="" /></p>

<h2>Why use the Page Object Pattern?</h2>

<ul>
<li><p>Readable dsl for tests</p></li>
<li><p>Promotes Reuse</p></li>
<li><p>Centralise UI coupling &ndash; One place to make changes around the UI.</p></li>
</ul>


<h2>Implementing the Page Pattern in Cucumber</h2>

<p>Within Cucumber there are two main ways we can encapsulate the page UI:</p>

<h3>The Page Object Pattern</h3>

<p><em>features/pages/login_page.rb</em></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">LoginPage</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
</span><span class='line'>    <span class="n">fill_in</span> <span class="ss">:user</span><span class="p">,</span> <span class="n">user</span>
</span><span class='line'>    <span class="n">fill_in</span> <span class="ss">:password</span> <span class="n">password</span>
</span><span class='line'>    <span class="n">click</span> <span class="s1">&#39;login&#39;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">visit</span>
</span><span class='line'>    <span class="n">visit</span> <span class="s2">&quot;/login&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><em>features/step_definitions/user_steps.rb</em></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Given</span> <span class="sr">/^I login with username &quot;Joseph&quot; and password &quot;cuker&quot;$/</span> <span class="k">do</span> <span class="o">|</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="o">|</span>
</span><span class='line'>  <span class="n">login_page</span> <span class="o">=</span> <span class="no">LoginPage</span><span class="o">.</span><span class="n">new</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">login_page</span><span class="o">.</span><span class="n">visit</span>
</span><span class='line'>  <span class="n">login_page</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>The Page Step definition Pattern</h3>

<p>Cucumber step definitions are all defined at the same scope, but we use folders and files to create logical organisation. We can create folders for UI step definitions and domain step definitions.</p>

<ul>
<li><p>features/domain/step_definitions/*</p></li>
<li><p>features/ui/step_definitions/*</p></li>
</ul>


<p>We create a step definition file mapping to a UI page.
<em>features/ui/step_definitions/login_page_steps.rb</em></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Given</span> <span class="sr">/^I login with username &quot;Joseph&quot; and password &quot;cuker&quot;$/</span> <span class="k">do</span> <span class="o">|</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="o">|</span>
</span><span class='line'>  <span class="n">fill_in</span> <span class="ss">:user</span><span class="p">,</span> <span class="n">user</span>
</span><span class='line'>  <span class="n">fill_in</span> <span class="ss">:password</span> <span class="n">password</span>
</span><span class='line'>  <span class="n">click</span> <span class="s1">&#39;login&#39;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Whats the right way to encapsulate the UI?</h2>

<p>Just using step definitions for organisation within a project can have a number of problems:</p>

<p><strong>Global scope within Cucumbers world</strong>
Instance variables are global across all step definitions</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Given</span> <span class="sr">/^I mess with scope$/</span> <span class="k">do</span>
</span><span class='line'>  <span class="vi">@this_can_be_seen_by_every_other_step</span> <span class="o">=</span> <span class="s1">&#39;uh oh&#39;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Managed and run through Cucumber</strong>
No easy way to be reused outside of Cucumber or test in isolation. By isolating the test code we can easily provide adapters for reuse in different test frameworks (for example similar to what <a href="https://github.com/bmabey/email-spec">email-spec</a> does).</p>

<p>The Page Object pattern (and adding another layer of abstraction) has a couple of nice properties:</p>

<ul>
<li><p>Bounded scope (if you use your classes/objects nicely)</p></li>
<li><p>Isolated units that can be invoked and controlled independently of overarching testing framework</p></li>
</ul>


<h2>Should I be using the Page Object Pattern?</h2>

<p>Yes, No, Maybe.</p>

<p>Extra layers of abstraction introduce complexity and so the Page Object Pattern should be used carefully when there is a sufficiently high burden of maintenance (which usually means lots of step definitions).</p>

<p>Its important outside of the Page object pattern to realise the weaknesses of just using step definitions as your only modelling tool. Irrelevant of what metaphor you decide to organise around it&rsquo;s a good habit to push the code out of the step definitions.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/katas/awari-kata.html">Awari Kata</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-01T14:00:32+00:00" pubdate data-updated="true">Mar 1<span>st</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>The Game</h2>

<p><a href="http://en.wikipedia.org/wiki/Oware">Awari</a> is an ancient game originating from Africa which consists of 12 holes in the ground (called houses) split up into 2 rows of 6. Designed for two players, each player selects a row as their territory. Each house starts with 4 seeds in it.</p>

<p><img src="/images/blog/2009/09/image002.jpg" alt="Awari" /></p>

<h3>A round in the game goes as follows:</h3>

<p>The player picks a number of seeds from one of their houses. They sow the seeds one by one in an anti-clockwise direction around the board.</p>

<p>The number of seeds in the last sown house dictates what happens next:</p>

<ul>
<li>If there are not 2 or 3 seeds then the go finishes and its the opponents turn.</li>
<li>If the last hole is one of your opponents and the number of beads is 2 or 3 you win those beads

<ul>
<li>If you collect, then you may look at the next-to-last, and if that satisfies the same criteria, you collect those also</li>
</ul>
</li>
<li>If you play so many beads that they wrap around the board (more than 11) you do not &lsquo;sow&rsquo; a bead in the house from which you picked up</li>
</ul>


<p>If an opponent&rsquo;s houses are all empty, the current player must make a move that gives the opponent seeds. If no such move is possible, the current player captures all seeds in his/her own territory, ending the game.</p>

<h3>Winning</h3>

<p>The game is over when:</p>

<ul>
<li>one player has captured 25 or more seeds</li>
<li>each player has taken 24 seeds (draw).</li>
<li>If both players agree that the game has been reduced to an endless cycle, each player captures the seeds on their side of the board.</li>
</ul>


<h2>The Challenge</h2>

<p>Attempt to write an AI to play Awari against.</p>

<p>Good luck.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/agile/story-smells-in-order-to-do-x-i-want-x.html">Story Smells: In Order to Do X I Want X</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-23T18:40:48+00:00" pubdate data-updated="true">Nov 23<span>rd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I keep coming across story cards written like this:</p>

<p><img src="/images/blog/2010/11/card.png" alt="" /></p>

<p>This is usually a tell tale sign that the <a href="http://www.theregister.co.uk/2007/06/25/thoughtworks_req_manage/">why stack was not popped</a>. The value (<em>In order to <value></em>) has been written at the lowest possible level of abstraction, the same as the feature (<em>I want <feature></em>). The card does not tell us why this feature is being built.</p>

<p>If you find yourself writing cards like this take it as a chance to find out a bit more about why you are adding this feature. Hopefully you will uncover a more meaningful value that you can write on the card or perhaps discover that you don&rsquo;t really need this feature after all.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/acceptance-testing/allowing-features-to-breathe.html">Allowing Features to Breathe</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-17T16:42:22+00:00" pubdate data-updated="true">Nov 17<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Your Cucumber features are living documentation. The world is evolving around them and without exposure they tend to rot.</p>

<h3>Evolving language</h3>

<p>When features are written we use a snapshot of the domain language at some specific timeframe. This ubiquitous language changes and grows outside the codebase and is influenced by more than just developers. When do we refactor features to reflect these changes?</p>

<h3>Taints</h3>

<p>Since the features are in the code base it becomes the developers/QAs responsibility to maintain them. When writing the features for the first time we have lots of discussion. But at a later date the feature language may be tweaked by a developer to allow reuse or some new technical constraint means they want a special step added. This is where taints can sneak into the language.</p>

<h3>Quality</h3>

<p>It&rsquo;s amazing what a difference it makes when people know something they are writing will be published and read by others. Exposing the features can help increase their quality.</p>

<h3>Barriers to entry</h3>

<p>It&rsquo;s great that the features sit close to the code but there is a barrier in how you gain access to that code. While developers find source control like second nature its something that gets in the way for non-technical people.</p>

<h2>Allowing features to breathe</h2>

<p>When someone wants to know about the behaviour of a feature they should be able to turn to the features irrelevant of technical expertise. This engenders discussion which helps bring about changes to the features to better reflect the ubiquitous language and remove taints. The easier it is to access the features the more likely they are to be the first port of call.</p>

<p>So my advice is exposure your Cucumber features to your team (and if possible your users, which <a href="http://relishapp.com/rspec">Rspec has done with Relish</a>), allowing them to browse and question them.</p>

<h3>Relish</h3>

<p>To expose features I currently use <a href="http://relishapp.com">Relish</a>. This is a web based browser for features.</p>

<p><img src="/images/blog/2010/11/Screen-shot-2010-11-17-at-14.27.21.png" alt="" /></p>

<p>Relish has a <a href="https://github.com/justinko/relish">command line gem</a> for pushing features up to the website. I use a post-receive server git hook which upon every push also pushes the features to Relish.</p>

<p>.git/hooks/post-receive
<code></code></p>

<pre><code>#!/bin/sh
relish push --project air --organization breathe
</code></pre>

<p><code></code></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/4/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/page/2/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/art/emacs-animation.html">Animations with Emacs</a>
      </li>
    
      <li class="post">
        <a href="/clojure/clojure-and-kinesis-at-scale.html">Clojure and Kinesis at scale</a>
      </li>
    
      <li class="post">
        <a href="/clojure/overtone-driving-minecraft.html">Clojure and Overtone driving Minecraft</a>
      </li>
    
      <li class="post">
        <a href="/art/live-coding-repl-electric.html">Live Coding - Repl Electric</a>
      </li>
    
      <li class="post">
        <a href="/clojure/creative_machines.html">Creative Machines</a>
      </li>
    
      <li class="post">
        <a href="/clojure/sounds-of-the-human-brain.html">Sounds of the human brain</a>
      </li>
    
      <li class="post">
        <a href="/clojure/building-clojure-services-at-scale.html">Building Clojure services at scale</a>
      </li>
    
      <li class="post">
        <a href="/clojure/creating-instruments-with-overtone.html">Creating sampled instruments with Overtone</a>
      </li>
    
      <li class="post">
        <a href="/elixir/sets-in-elixir.html">Sets in Elixir</a>
      </li>
    
      <li class="post">
        <a href="/clojure/isolating-external-dependencies-in-clojure.html">Isolating external dependencies in Clojure</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/josephwilk">@josephwilk</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'josephwilk',
            count: 10,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Joseph Wilk -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'josephwilk';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
