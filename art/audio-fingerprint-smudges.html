
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Audio Fingerprint Smudges - Joseph Wilk</title>
  <meta name="author" content="Joseph Wilk">

  
  <meta name="description" content="Procedurally generating music, scoring generations based on an audio service (like SoundCloud) identifying it as an existing song/artist. The more &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.josephwilk.net/art/audio-fingerprint-smudges.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Joseph Wilk" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<script src="http://disqus.com/forums/josephwilk/embed.js"></script>
<link href="http://fonts.googleapis.com/css?family=Bevan" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3020740-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <img src="/images/joe_small2.png" style="position:relative;border-radius: 8px;margin-right: 5px;border-style: solid;border-width: 1px;border-color: #DDD;" height="60" alt="Joseph Wilk">
  <span style="display:inline-block">
    <h1><a href="/">Joseph Wilk</a></h1>
    <h2>Things with code, creativity and computation.</h2>
  </span>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
  
<ul class="main-navigation">
 <li><a href="/">Home</a></li>
 <li><a href="/about">About</a></li>
 <li><a href="/speaking">Speaking</a></li>
 <li><a href="/art">Art</a></li>
 <li><a href="/contact">Contact</a></li>
 <li><a href="/archives">Archives</a></li>
</ul>
</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Audio Fingerprint Smudges</h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-12-31T12:00:00+00:00" pubdate data-updated="true">Dec 31<span>st</span>, 2016</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Procedurally generating music, scoring generations based on an audio service (like SoundCloud) identifying it as an existing song/artist. The more famous the track/artist the better.</p>




<p>Machines identifying audio tend to:</p>




<ul>
<li>Reduce the audio features to their essence (facilitating fast lookup or accuracy on a sliding scale).</li>
<li>Rely on computer vision techniques to create audio fingerprints.</li>
<li>Account for differing audio quality and ambient background noise.</li>
<li>Use a training set of sane music to teach the algorithm to recognise music.</li>
</ul>




<p><small>Audiofinger print generated by <a href="https://github.com/acoustid/chromaprint">Chromaprint</a>:</small><br/>
<img src="/images/heavenflac.png" alt="Example audio fingerprint generated by Chromaprint for: Heaven by UNKLE" /></p>




<p>We use these propeties to guide us in creating new music for machines that explores the smudged edges around machine listening. Highlighting how differently humans and machines identify music. And for fun.</p>




<p>To try and match our generative audio to songs we will use a number of music services and some open-source audio fingerprinting tools. Most commercial audio fingerprinting algorithms are secret and patented up to the eyeballs. So there is a lot of trial and errors. Some services used to evalute a song match:</p>




<ul>
<li>Soundcloud (copyright detection)</li>
<li>Youtube (copyright detection)</li>
<li>Shazam (audio lookup)</li>
<li>Chromaprint (Open-source audio fingerpinter)</li>
</ul>




<h2>Music for Machines</h2>




<p>All generated tracks have comments exactly when a song was detected.</p>




<p><strong>Warning: The audio clips are designed for machines and not your weak human ears <img alt="ear" width="10" height="10" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f442.png">. Hence keep your volume low before listening</strong></p>




<p>Audio generations by <a href="https://twitter.com/Finger_smudger">@Finger_smudger</a></p>




<h3>Generation #1 &ndash; 1467636802259</h3>




<p>Artists/Songs identified:</p>




<ul>
<li>Sophonic Media &ndash; Make It Shine</li>
<li>Pachanga Boys &ndash; Time</li>
<li>Johan Vilborg &ndash; Second Wind (Illuminor Remix)</li>
<li>Oelki &ndash; Galileo</li>
<li>Lipps, Inc &ndash; Funkytown</li>
<li>Spaceanddisco &ndash; Nights</li>
<li>Matt Fax &ndash; Voyage orignal mix Bullistik</li>
<li>Katty Perry &ndash; Birthday (Cash Cash Remix)</li>
</ul>




<iframe width="100%" height="200" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/272121435&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;visual=true"></iframe>


<br/><br/>




<h3>Generation #1.1 &ndash; 1469483772764</h3>




<p>Artists/Songs identified:</p>




<ul>
<li>George Michael &ndash; A Different Corner</li>
<li>Dezt &ndash; Last Year</li>
<li>Axiuw &ndash; Be Yourself (Original Mix)</li>
<li>Duran Duran &ndash; Thank You</li>
</ul>




<iframe width="100%" height="200" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/275449291&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;visual=true"></iframe>


<br/><br/>




<h3>Generation #2.0 &ndash; 1470683054969</h3>




<p>Artist/Songs identified:</p>




<ul>
<li>Dimension &ndash; Mangata</li>
<li>Michael Jackson &ndash; You Are Not Alone (tempo 60 bpm / B major)</li>
</ul>




<iframe width="100%" height="200" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/277511054&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;visual=true"></iframe>


<br/><br/>




<h3>Generation #2.0 &ndash; 1470700413305</h3>




<p>Artist/Songs identified:</p>




<ul>
<li>T-Pain Vs Chuckie Feat. Pitbull &ndash; Its Not You (Its Me)</li>
<li>Pink Floyd &ndash; Cymbaline</li>
</ul>




<iframe width="100%" height="200" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/277510353&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;visual=true"></iframe>


<br/><br/>




<h2>Machines listening with ambient background noise</h2>




<p>While I experimented with lots of different services the above examples were most successful when using Shazam for identification. This focuses on operating in noisy environments and identifying a sound as quickly as possible based only on partial song information. This tolerance makes it easy to get Shazam to mis-match audio to songs.</p>




<p>The other services also had a nasty habit of banning new accounts uploading what appeared to be copyrighted infringing content (who would have thought!). Which makes the whole mass procedural generation somewhat challenging.</p>




<p>Shazam has a <a href="https://www.shazam.com/">desktop app</a> which will run detection on audio for 8 hours continuously. So over that time we generate a large set of audio and pick the winners from each generation.</p>




<h3>Overtone synths &amp; score generation</h3>




<p>Using <a href="https://github.com/overtone/overtone">Overtone</a> and Clojure a single audio generation works by:</p>




<ol>
<li><p>Dynamically generating Overtone synths using generative testing framework <a href="https://github.com/clojure/test.check">test.check</a>.
Using QuickCheck style generators is a cheap way of exploring a permutation space given grammar rules, like those of a synth definition in Overtone. Supports selection of:

<ul>
<li>Audio wave (potentially many combined)</li>
<li>Envelope type</li>
<li>Effects (reverb/echo/pitchshift/delays)</li>
<li>Filters (low pass/high pass)<br/>
The various properties of the audio units are selected randomly.</li>
</ul></p>
</li>
<li><p>Dynamically generating a score varying:

<ul>
<li>Clock tempo</li>
<li>Note lengths</li>
<li>Root note / scale</li>
<li>Octaves</li>
</ul>
</p>
</li>
<li><p>Dynamically generating synth control parameters:

<ul>
<li>Distortion</li>
<li>Changing audio wave (sin/saw/triangle/square/etc)</li>
</ul>
</p>
</li>
<li><p>Running for 3 minutes with a random chance of mutation to score and parameters.</p></li>

<li>Store state of a generation for future evolution. We store the state and mutations as edn: <a href="https://gist.githubusercontent.com/josephwilk/410f68a857f81e8073815999bf1a4b4f/raw/78319023141b18dfe90ab1183ecc13b30c4def33/1470683054969.edn">Example state for one generation</a></p></li>

<li><p>Each generation scored based on number of Shazam matches (scraped from Notification alerts on OS X).</p></li>
<li><p>Each generation scored by popularity of artists matched (manually 😐).</p></li>
</ol>


<br/>


<pre><code>&lt;p&gt;To avoid any background noise or messing with microphones we use &lt;a href="https://github.com/mattingalls/Soundflower"&gt;SoundFlower&lt;/a&gt; with the following setup:&lt;/p&gt;
&lt;p&gt; Overtone main audio -&gt;🔈 Soundflower input device&lt;br/&gt;
    Soundflower output device -&gt;🔈 Shazam Desktop.&lt;/p&gt;
</code></pre>

<h2>Conclusion</h2>




<p>There is a clear difference in the strength of accuracy when it comes to fingerprinting audio for copyright infringement. It&#8217;s noticeable that Soundcloud or YouTube are matching when  processing the entire track (even though it will check for partial matches) while Shazam focuses on as small a segment as possible LIVE. Open-source alternatives (like Chromaprint) while useful, provided little help tricking the commercial services.</p>




<p>Coming back to Shazam, what actually made the tracks match remains somewhat of a mystery. If we look at one example &#8220;Michael Jackson - You Are Not Alone&#8221; our generative score was not even in the same scale or tempo! We can identify things that made it hard to match, for example adding drums patterns killed off all matches. More layers of audio, more permutations to explore.</p>




<p>One thing is clear, the way machines learn and the specialisation on a single application rules out a whole subset of sound that is unlikely to enter the realm of music. Hence for the creators of the algorithms, a mismatch of this type is of little relevance.</p>




<p>This lost ghost music is perhaps just for the machines.</p>




<h2>Source code</h2>




<ul>
<li><p><strong>Finger Smudge</strong>: <a href="https://github.com/josephwilk/finger-smudge">https://github.com/josephwilk/finger-smudge</a>.
Core engine behind generating audio and container for all failed and future audio fingerprint smudge experiments:</p></li>
<li><p><strong>Synthatron</strong>: <a href="https://github.com/josephwilk/synthatron">https://github.com/josephwilk/synthatron</a>.
Overtone Synth generator using <code>test.check</code>:</p></li>
</ul>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Joseph Wilk</span></span>

      








  


<time datetime="2016-12-31T12:00:00+00:00" pubdate data-updated="true">Dec 31<span>st</span>, 2016</time>
      

<span class="categories">
  
    <a class='category' href='/art'>art</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://blog.josephwilk.net/art/audio-fingerprint-smudges.html" data-via="josephwilk" data-counturl="http://blog.josephwilk.net/art/audio-fingerprint-smudges.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="small"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/art/overtone-shader-visuals.html" title="Previous Post: Visuals with Overtone and Shadertone">&laquo; Visuals with Overtone and Shadertone</a>
      
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/art/audio-fingerprint-smudges.html">Audio Fingerprint Smudges</a>
      </li>
    
      <li class="post">
        <a href="/art/overtone-shader-visuals.html">Visuals with Overtone and Shadertone</a>
      </li>
    
      <li class="post">
        <a href="/art/emacs-animation.html">Animations with Emacs</a>
      </li>
    
      <li class="post">
        <a href="/clojure/clojure-and-kinesis-at-scale.html">Clojure and Kinesis at scale</a>
      </li>
    
      <li class="post">
        <a href="/clojure/overtone-driving-minecraft.html">Clojure and Overtone driving Minecraft</a>
      </li>
    
      <li class="post">
        <a href="/art/live-coding-repl-electric.html">Live Coding - Repl Electric</a>
      </li>
    
      <li class="post">
        <a href="/clojure/creative_machines.html">Creative Machines</a>
      </li>
    
      <li class="post">
        <a href="/clojure/sounds-of-the-human-brain.html">Sounds of the human brain</a>
      </li>
    
      <li class="post">
        <a href="/clojure/building-clojure-services-at-scale.html">Building Clojure services at scale</a>
      </li>
    
      <li class="post">
        <a href="/clojure/creating-instruments-with-overtone.html">Creating sampled instruments with Overtone</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/josephwilk">@josephwilk</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'josephwilk',
            count: 10,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Joseph Wilk -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'josephwilk';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://blog.josephwilk.net/art/audio-fingerprint-smudges.html';
        var disqus_url = 'http://blog.josephwilk.net/art/audio-fingerprint-smudges.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
